<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D·ª± √°n | ICN Lab - PTIT</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="nav-container" id="navbar">
        <nav>
            <a href="index.html" class="logo">
                <div class="logo-img">ICN</div>
                <div class="logo-text"><strong>ICN Lab</strong><span>PTIT Research</span></div>
            </a>
            <ul class="nav-links">
                <li><a href="index.html">Trang ch·ªß</a></li>
                <li><a href="about.html">Gi·ªõi thi·ªáu</a></li>
                <li><a href="research.html">Nghi√™n c·ª©u</a></li>
                <li><a href="projects.html" class="active">D·ª± √°n</a></li>
                <li><a href="publications.html">C√¥ng b·ªë</a></li>
                <li><a href="members.html">Th√†nh vi√™n</a></li>
                <li><a href="contact.html">Li√™n h·ªá</a></li>
            </ul>
            <button class="menu-toggle" id="menuToggle" aria-label="Menu"><span></span><span></span><span></span></button>
        </nav>
    </div>

    <header class="page-header">
        <h1>D·ª± √°n nghi√™n c·ª©u</h1>
        <p>C√°c d·ª± √°n ƒëang th·ª±c hi·ªán c·ªßa ICN Lab</p>
    </header>

    <section class="section">
        <div class="projects-grid" id="projectsGrid">
            <div class="loading">ƒêang t·∫£i danh s√°ch d·ª± √°n...</div>
        </div>
    </section>

    <footer>
        <div class="footer-content">
            <div class="footer-about"><h3>ICN Lab - PTIT</h3><p>Intelligently Connected Networks Lab ‚Äì nghi√™n c·ª©u c√°c gi·∫£i ph√°p cho h·ªá th·ªëng m·∫°ng th·∫ø h·ªá m·ªõi.</p></div>
            <div class="footer-links"><h4>Li√™n k·∫øt</h4><ul><li><a href="about.html">Gi·ªõi thi·ªáu</a></li><li><a href="research.html">Nghi√™n c·ª©u</a></li><li><a href="projects.html">D·ª± √°n</a></li><li><a href="publications.html">C√¥ng b·ªë</a></li></ul></div>
            <div class="footer-contact"><h4>Li√™n h·ªá</h4><p>üìç Ph√≤ng 06/B15, PTIT</p><p>‚úâÔ∏è icnlab@ptit.edu.vn</p></div>
        </div>
        <div class="footer-bottom"><p>¬© 2026 ICN Lab - PTIT</p></div>
    </footer>

    <script src="config.js"></script>
    <script src="api.js"></script>
    <script>
        const API_BASE = typeof API_BASE_URL !== 'undefined' ? API_BASE_URL.replace('/api', '') : 'http://localhost:5000';
        document.getElementById('menuToggle')?.addEventListener('click', () => document.querySelector('.nav-links')?.classList.toggle('open'));
        window.addEventListener('scroll', () => document.getElementById('navbar')?.classList.toggle('scrolled', window.scrollY > 50));

        async function loadProjects() {
            const grid = document.getElementById('projectsGrid');
            try {
                const res = await api.getProjects({ status: 'active' });
                const projects = res.data || [];
                if (projects.length === 0) {
                    grid.innerHTML = '<div class="empty-state">Ch∆∞a c√≥ d·ª± √°n n√†o ƒë∆∞·ª£c c√¥ng b·ªë</div>';
                    return;
                }
                grid.innerHTML = projects.map(p => `
                    <div class="project-card fade-in">
                        <div class="project-image">
                            ${p.image ? `<img src="${API_BASE}${p.image}" alt="${p.title}">` : ''}
                        </div>
                        <div class="project-content">
                            <div class="project-date">${p.startDate ? new Date(p.startDate).toLocaleDateString('vi-VN') : ''}</div>
                            <h4>${p.title}</h4>
                            <p>${p.description || ''}</p>
                        </div>
                    </div>
                `).join('');
                const obs = new IntersectionObserver(entries => { entries.forEach(e => { if (e.isIntersecting) e.target.classList.add('visible'); }); }, { threshold: 0.1 });
                document.querySelectorAll('.fade-in').forEach(el => obs.observe(el));
            } catch (e) {
                grid.innerHTML = '<div class="empty-state">Kh√¥ng th·ªÉ t·∫£i danh s√°ch d·ª± √°n</div>';
            }
        }
        document.addEventListener('DOMContentLoaded', loadProjects);
    </script>
</body>
</html>
